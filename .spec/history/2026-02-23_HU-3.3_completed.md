# Objective: HU-3.3 — Pagina de contacto

## Context
- **Feature:** FEAT-3 — Canal de Comunicacion y Conversion WhatsApp
- **Story:** Como cliente o visitante del sitio, quiero ver la informacion de contacto de HGourmet y poder enviar un mensaje, para poder comunicarme con la tienda o visitarla fisicamente.
- **Spec Level:** Lite
- **Git Mode:** trunk (sin rama `hu/N.M`; trabajo sobre `main`)
- **TDD Mode:** flexible (`IMPLEMENT → TEST → REFACTOR`)

## Acceptance Criteria (BDD)
1. La ruta `/contacto` muestra direccion, telefono, email, horario, enlaces a WhatsApp/Facebook/Instagram y mapa de ubicacion.
2. El formulario valida nombre, email y mensaje antes de enviar.
3. Al enviar con datos validos, muestra confirmacion placeholder sin recarga abrupta.
4. Se mantiene paridad visual con el prototipo Lovable en pantalla de contacto y footer.
5. En errores de validacion, se bloquea envio y se muestran mensajes claros por campo.

### Escenario 1: Contacto completo visible
- **Dado que** una persona entra a `/contacto`,
- **Cuando** la pagina termina de cargar,
- **Entonces** debe visualizar informacion de contacto completa y accesible, junto con el bloque de mapa.

### Escenario 2: Envio exitoso del formulario
- **Dado que** la persona completa nombre, email y mensaje validos,
- **Cuando** presiona "Enviar mensaje",
- **Entonces** debe mostrarse confirmacion de envio (placeholder) y mantenerse la UI estable.

### Escenario 3: Paridad visual con prototipo
- **Dado que** el prototipo Lovable define la referencia visual para contacto y footer,
- **Cuando** se valida la implementacion final,
- **Entonces** debe respetarse la jerarquia tipografica, composicion de columnas y estilo visual general del prototipo.

### Escenario 4: Bloqueo por validacion invalida (error)
- **Dado que** hay campos vacios o email con formato invalido,
- **Cuando** la persona intenta enviar el formulario,
- **Entonces** el sistema debe impedir el envio y mostrar mensajes de error accionables por campo.

## Implementation Plan

### Task 1: Construir ruta `/contacto` con layout base y bloques informativos (~45 min) ✅
- **Type:** [SC]
- **Cycle:** IMPLEMENT → TEST → REFACTOR
- **Files:** `src/app/(storefront)/contacto/page.tsx`
- **Verification:** ✅ 23/23 tests passing

### Task 2: Implementar formulario interactivo con validacion client-side (~55 min) ✅
- **Type:** [CC]
- **Cycle:** IMPLEMENT → TEST → REFACTOR
- **Files:** `src/components/storefront/ContactForm.tsx`
- **Verification:** ✅ 23/23 tests passing

### Task 3: Integrar social links + mapa placeholder con accesibilidad (~35 min) ✅
- **Type:** [SC]
- **Cycle:** IMPLEMENT → TEST → REFACTOR
- **Files:** `src/app/(storefront)/contacto/page.tsx`, `src/lib/constants.ts`
- **Verification:** ✅ STORE_INFO.hours added; social buttons with ADR-006 inline styles

### Task 4: Cubrir BDD con pruebas de integración de contacto (~50 min) ✅
- **Type:** [TEST]
- **Cycle:** IMPLEMENT → TEST → REFACTOR
- **Files:** `src/tests/integration/hu-3.3-scenarios.test.tsx`
- **Verification:** ✅ 23 tests — 4 escenarios BDD cubiertos

### Task 5: Validacion final de regresion visual/funcional (~30 min) ✅
- **Type:** [TEST]
- **Cycle:** IMPLEMENT → TEST → REFACTOR
- **Files:** `src/app/(storefront)/contacto/page.tsx`, `src/components/storefront/ContactForm.tsx`, `src/tests/integration/hu-3.3-scenarios.test.tsx`
- **Verification:** ✅ 291/291 tests passing — 0 regressions | Commit: `4894840`

## Database Changes (if applicable)
No aplica. Esta historia no requiere cambios de esquema, migraciones SQL ni nuevas politicas RLS.

## Riesgos y Dependencias
- **Dependencias:** HU-3.1 y HU-3.2 ya completadas; se reutilizan links sociales de `SOCIAL_LINKS`.
- **Riesgo UX:** mantener paridad visual con prototipo puede ser subjetivo sin checklist visual.
- **Riesgo tecnico:** evitar clases Tailwind arbitrarias para colores/medidas de marcas (ADR-006 y ADR-011).
- **Riesgo funcional:** validaciones incompletas del formulario podrian permitir estados inconsistentes.

## Manual Testing Checklist
- [x] Abrir `/contacto` en desktop y mobile; confirmar secciones de contacto completas, redes y mapa placeholder.
- [x] Verificar que WhatsApp/Facebook/Instagram abren enlaces correctos y seguros (`target="_blank"` + `rel="noopener noreferrer"`).
- [x] Probar formulario con campos vacios o email invalido; confirmar bloqueo de envio y mensajes por campo.
- [x] Probar formulario con datos validos; confirmar mensaje de exito placeholder sin recarga completa.
- [x] Verificar consistencia visual con header/footer y jerarquia tipografica del storefront.
- [x] Ejecutar `npm run test:run` sin regresiones.

## Definition of Done
- [x] Todos los criterios BDD de HU-3.3 estan cubiertos por pruebas y pasan localmente.
- [x] No hay errores de TypeScript ni de lint en archivos de HU-3.3.
- [x] No aplica validacion de RLS para esta historia (sin cambios de datos).
- [x] Entrada de CHANGELOG preparada para `@finish-objective`.
- [x] Commits siguiendo convención `feat(HU-3.3): ...`.
- [x] Tag `HU-3.3` planificado para cierre en `@finish-objective`.

## Completion
- **Date:** 2026-02-23
- **Estimated Duration:** ~215 min (45 + 55 + 35 + 50 + 30)
- **Actual Duration:** ~0 min (medido por git entre el primer y último commit `feat(HU-3.3)`: un solo commit `4894840`)
- **Variance:** Menor al estimado en el registro de commits; el trabajo se consolidó en un commit único al final del ciclo.
- **Files modified:** `src/app/(storefront)/contacto/page.tsx`, `src/components/storefront/ContactForm.tsx`, `src/lib/constants.ts`, `src/tests/integration/hu-3.3-scenarios.test.tsx`
- **Tests added:** 23

## Deviations & Decisions
- **Added:** None
- **Changed:** `src/lib/constants.ts` incluyó ajuste de `SOCIAL_LINKS.instagram` al perfil oficial (`https://instagram.com/hgourmet.mid`), cambio menor de configuración no explícito en el plan inicial.
- **Skipped:** None
- **Key Decisions:** Mantener envío de formulario como placeholder UI (sin integración externa) dentro del alcance de HU-3.3; se valida visual/funcionalmente y se deja envío real para historia posterior.
- **Escalated ADRs:** None
- **Lesson:** Para mediciones de duración más precisas por HU, conviene registrar más de un commit funcional por tarea completada.
