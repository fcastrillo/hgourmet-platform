# Objective: HU-2.5 — Gestión de banners rotativos

## Context
- **Feature:** FEAT-2 — Panel de Administración
- **Story:** Como administradora de HGourmet, quiero crear, editar, reordenar y activar/desactivar banners promocionales desde el panel, para poder mantener la página principal actualizada con promociones y novedades sin soporte técnico
- **Spec Level:** Standard

## Acceptance Criteria (BDD)

### Escenario 1: Crear banner exitosamente
> **Dado que** soy una administradora autenticada,
> **Cuando** creo un nuevo banner con título "Promoción Navidad", imagen y link a la categoría de temporada, y presiono "Guardar",
> **Entonces** el banner se crea, la imagen se sube a Supabase Storage, y el banner aparece en el carrusel de la página principal.

### Escenario 2: Desactivar banner
> **Dado que** quiero desactivar un banner porque la promoción terminó,
> **Cuando** desactivo el toggle "Activo" del banner,
> **Entonces** el banner deja de mostrarse en el carrusel público pero permanece en la lista del panel para reactivación futura.

### Escenario 3: Banner sin imagen (error)
> **Dado que** intento crear un banner sin subir una imagen,
> **Cuando** envío el formulario,
> **Entonces** el sistema muestra un mensaje de validación "La imagen es obligatoria" y no crea el banner.

## Implementation Summary

11 tasks completed:
1. DB Migration (`002_banners.sql`) ✅
2. Storage Bucket `banner-images` ✅
3. TypeScript Types (`Banner`) ✅
4. Data Access Layer (queries) ✅
5. Server Actions (CRUD + image upload) ✅
6. BannerTable [CC] (ADR-009) ✅
7. BannerForm + DeleteBannerDialog [CC] ✅
8. Admin Banner Pages [SC] ✅
9. Banner Carousel — Storefront [CC] ✅
10. Integration Tests (23 tests) ✅
11. SETUP.md Update ✅

## Completion
- **Date:** 2026-02-22
- **Estimated Duration:** ~1–2 days (from BACKLOG estimate)
- **Actual Duration:** ~4 hours (single commit session: 18:21 on 2026-02-22, AI-assisted)
- **Variance:** Estimated M (~1–2 days), actual ~4h — ~4-6x faster with AI assistance
- **Files modified:** 16 (4 modified + 12 new)
- **Tests added:** 23 (total acumulado: 187)

## Deviations & Decisions
- **Added:** None
- **Changed:** Tests consolidated into single file `hu-2.5-scenarios.test.tsx` (following project convention of 1 test suite per HU) instead of 3 separate files as originally planned
- **Changed:** `HomepageHero.tsx` was not modified — kept as-is as the fallback component when no banners are active, instead of modifying it as originally planned (simpler, cleaner separation)
- **Skipped:** None
- **Key Decisions:** Carousel uses simple CSS opacity transition (no external carousel library) to keep bundle size minimal; full-width design is compatible with upcoming sprint cosmético
- **Escalated ADRs:** None — all patterns followed existing ADR-005, ADR-009, ADR-010
- **Lesson:** CRUD modules with image upload follow a highly predictable pattern (queries → actions → table → form → pages). The `product-images` pattern from HU-2.2 replicated cleanly to `banner-images` with minimal adaptation.
